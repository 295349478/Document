{"EpubVersion":2,"filepath":"","floatingtheme":[],"folded":false,"markups":[{"date":"2022-03-24 16:30:17","docid":0,"fillcolor":"ffffed99","folded":true,"id":1,"markups":[{"content":"用户为启动","date":"2022-03-24 16:30:55","docid":0,"fillcolor":"ffffed99","folded":true,"id":6,"markups":[{"content":"根据用户获取角色记录数据","date":"2022-03-24 16:31:03","docid":0,"fillcolor":"ffffed99","id":7,"originaltext":"认证","page":6,"textblocks":[{"first":[66.61283111572266,116.5284423828125,9.75396728515625,13.5],"last":[76.36679077148438,116.5284423828125,9.75396728515625,13.5],"length":2,"rects":[[66.61283111572266,116.5284423828125,19.50792694091797,13.5]],"start":104,"text":"认证"}],"type":5},{"content":"根据角色获取到权限记录数据","date":"2022-03-24 16:31:06","docid":0,"fillcolor":"ffffed99","id":8,"originaltext":"授权","page":6,"textblocks":[{"first":[66.61283111572266,140.03759765625,9.75396728515625,12.5],"last":[76.36679077148438,140.03759765625,9.75396728515625,12.5],"length":2,"rects":[[66.61283111572266,140.03759765625,19.50792694091797,12.5]],"start":139,"text":"授权"}],"type":5}],"originaltext":"权限管理概念","page":5,"textblocks":[{"first":[81.14421081542969,756.0147094726562,17.069129943847656,19.5],"last":[166.48988342285156,756.0147094726562,17.069137573242188,19.5],"length":6,"rects":[[81.14421081542969,756.0147094726562,102.41481018066406,19.5]],"start":258,"text":"权限管理概念"}],"type":5},{"content":"完成上一步骤认证授权需要三个表也就是RBAC模型","date":"2022-03-24 16:30:32","docid":0,"fillcolor":"ffffed99","folded":true,"id":3,"markups":[{"date":"2022-03-24 16:30:29","docid":0,"fillcolor":"ffffed99","id":2,"originaltext":"用户","page":6,"textblocks":[{"first":[52.35690689086914,200.8076171875,9.75394058227539,12.5],"last":[62.1108512878418,200.8076171875,9.75394058227539,12.5],"length":2,"rects":[[52.35690689086914,200.8076171875,19.507884979248047,12.5]],"start":189,"text":"用户"}],"type":5},{"date":"2022-03-24 16:30:38","docid":0,"fillcolor":"ffffed99","id":4,"originaltext":"角色","page":6,"textblocks":[{"first":[52.35690689086914,223.01670837402344,9.75394058227539,13.5],"last":[62.1108512878418,223.01670837402344,9.75394058227539,13.5],"length":2,"rects":[[52.35690689086914,223.01670837402344,19.507884979248047,13.5]],"start":222,"text":"角色"}],"type":5},{"date":"2022-03-24 16:30:42","docid":0,"fillcolor":"ffffed99","id":5,"originaltext":"权限","page":6,"textblocks":[{"first":[52.35690689086914,245.57611083984375,9.75394058227539,13.5],"last":[62.1108512878418,245.57611083984375,9.75394058227539,13.5],"length":2,"rects":[[52.35690689086914,245.57611083984375,19.507884979248047,13.5]],"start":260,"text":"权限"}],"type":5}],"originaltext":"完成权限管理需要三个对象","page":6,"textblocks":[{"first":[81.14529418945312,164.045166015625,17.06939697265625,19.5],"last":[268.9086608886719,164.045166015625,17.06939697265625,19.5],"length":12,"rects":[[81.14529418945312,164.045166015625,204.832763671875,19.5]],"start":175,"text":"完成权限管理需要三个对象"}],"type":5}],"originaltext":"二、初识权限管理","page":5,"textblocks":[{"first":[52.357177734375,713.843994140625,21.94640350341797,25.5],"last":[205.9820098876953,713.843994140625,21.946395874023438,25.5],"length":8,"rects":[[52.357177734375,713.843994140625,175.57122802734375,25.5]],"start":244,"text":"二、初识权限管理"}],"type":5},{"date":"2022-03-24 16:32:05","docid":0,"fillcolor":"ffffed99","folded":true,"id":9,"markups":[{"content":"使用aop切面编程的技术来实现权限管理\n本质使用了servlet过滤链\n1、完善的认证机制\n2、方法级授权功能\n\n\n其中的jar包只需要导入config，taglibs即可，因为其中已经存在core包","date":"2022-03-24 16:38:53","docid":0,"fillcolor":"ffffed99","id":10,"originaltext":"Spring Security概念","page":6,"textblocks":[{"first":[81.15279388427734,350.12744140625,9.405220031738281,22.496002197265625],"last":[226.23287963867188,350.12744140625,17.069229125976562,22.496002197265625],"length":17,"rects":[[81.15279388427734,350.12744140625,162.1493148803711,22.496002197265625]],"start":394,"text":"Spring Security概念"}],"type":5},{"content":"","date":"2022-03-24 16:56:20","docid":0,"fillcolor":"ffffed99","folded":true,"id":11,"markups":[{"content":"其中的jar包只需要导入config，taglibs即可，因为其中已经存在core包","date":"2022-03-24 16:56:37","docid":0,"fillcolor":"ffffed99","id":12,"originaltext":"1 创建web工程并导入jar包","page":6,"textblocks":[{"first":[77.40412902832031,488.33038330078125,8.354156494140625,19.5],"last":[242.3421173095703,488.33038330078125,14.630752563476562,19.5],"length":16,"rects":[[77.40412902832031,488.33038330078125,179.56874084472656,19.5]],"start":577,"text":"1 创建web工程并导入jar包"}],"type":5},{"date":"2022-03-24 16:56:48","docid":0,"fillcolor":"ffffed99","id":13,"originaltext":"2 配置web.xml","page":7,"textblocks":[{"first":[77.41409301757812,491.29559326171875,8.355216979980469,17.5],"last":[176.2647705078125,491.29559326171875,4.4629364013671875,17.5],"length":11,"rects":[[77.41409301757812,491.29559326171875,103.31361389160156,17.5]],"start":14,"text":"2 配置web.xml"}],"type":5},{"content":"编写security的xml配置文件","date":"2022-03-24 17:02:07","docid":0,"fillcolor":"ffffed99","id":14,"originaltext":"3 配置spring-security.xml","page":8,"textblocks":[{"first":[77.40522003173828,74.9214859008789,8.354270935058594,19.5],"last":[254.2937469482422,74.9214859008789,4.4624481201171875,19.5],"length":23,"rects":[[77.40522003173828,74.9214859008789,181.3509750366211,19.5]],"start":4,"text":"3 配置spring-security.xml"}],"type":5},{"content":"因为父容器不能访问子容器的内容而子容器可以访问父容器的内容\n在外部，不可以访问父容器的内容，只能通过子容器进行访问。\n\n对于security不能让外部直接访问到，所以security的代码需要放到父容器中","date":"2022-03-24 17:10:19","docid":0,"fillcolor":"ffffed99","id":15,"originaltext":"4 将spring-security.xml配置文件引入到applicationContext.xml中","page":8,"textblocks":[{"first":[77.40522003173828,635.4015502929688,8.354270935058594,19.5],"last":[517.6541748046875,635.4015502929688,14.63092041015625,19.5],"length":52,"rects":[[77.40522003173828,635.4015502929688,454.87987518310547,19.5]],"start":35,"text":"4 将spring-security.xml配置文件引入到applicationContext.xml中"}],"type":5},{"date":"2022-03-25 14:04:36","docid":0,"fillcolor":"ffffed99","id":16,"originaltext":"5 运行结果","page":8,"textblocks":[{"first":[77.40522003173828,724.0369262695312,8.354270935058594,17.5],"last":[133.4492645263672,724.0369262695312,14.630950927734375,17.5],"length":6,"rects":[[77.40522003173828,724.0369262695312,70.67499542236328,17.5]],"start":96,"text":"5 运行结果"}],"type":5}],"originaltext":"Spring Security简单入门","page":6,"textblocks":[{"first":[81.15216827392578,425.9090576171875,9.405143737792969,22.497222900390625],"last":[260.3709411621094,425.9090576171875,17.0692138671875,22.497222900390625],"length":19,"rects":[[81.15216827392578,425.9090576171875,196.2879867553711,22.497222900390625]],"start":505,"text":"Spring Security简单入门"}],"type":5}],"originaltext":"三、初识Spring Security","page":6,"textblocks":[{"first":[52.35690689086914,307.10577392578125,21.946369171142578,27.49932861328125],"last":[292.2519836425781,307.10577392578125,12.487457275390625,27.49932861328125],"length":19,"rects":[[52.35690689086914,307.10577392578125,252.3825340270996,27.49932861328125]],"start":369,"text":"三、初识Spring Security"}],"type":5},{"date":"2022-03-25 14:04:45","docid":0,"fillcolor":"ffffed99","folded":true,"id":17,"markups":[{"date":"2022-03-25 14:05:05","docid":0,"fillcolor":"ffffed99","folded":false,"id":18,"markups":[{"content":"初始化容器然后放到SecurityContext也就是上下文中\n1、为后面的过滤器建立上下文\n2、上下文中保存用户的认证和权限信息","date":"2022-03-25 14:11:00","docid":0,"fillcolor":"ffffed99","id":19,"originaltext":"SecurityContextPersistenceFilter","page":10,"textblocks":[{"first":[268.8214111328125,523.361083984375,5.354827880859375,8.5],"last":[411.38726806640625,523.361083984375,3.97955322265625,8.5],"length":32,"rects":[[268.8214111328125,523.361083984375,146.54541015625,8.5]],"start":346,"text":"SecurityContextPersistenceFilter"}],"type":5},{"content":"用于与spring集成的过滤器","date":"2022-03-25 14:16:41","docid":0,"fillcolor":"ffffed99","id":20,"originaltext":"WebAsyncManagerIntegrationFilter","page":10,"textblocks":[{"first":[333.83935546875,617.7034912109375,9.031982421875,9.5],"last":[489.7807312011719,617.7034912109375,3.979522705078125,9.5],"length":32,"rects":[[333.83935546875,617.7034912109375,159.9208984375,9.5]],"start":637,"text":"WebAsyncManagerIntegrationFilter"}],"type":5},{"content":"如果使用动态标签仅限于jsp页面","date":"2022-03-25 14:16:46","docid":0,"fillcolor":"ffffed99","id":21,"originaltext":"HeaderWriterFilter","page":10,"textblocks":[{"first":[267.34027099609375,661.1861572265625,7.198272705078125,13.5145263671875],"last":[348.0234069824219,661.1861572265625,3.979522705078125,13.5145263671875],"length":18,"rects":[[267.34027099609375,661.1861572265625,84.66265869140625,13.5145263671875]],"start":767,"text":"HeaderWriterFilter"}],"type":5},{"content":"防止跨域请求伪造","date":"2022-03-25 14:19:19","docid":0,"fillcolor":"ffffed99","id":33,"originaltext":"CsrfFilter","page":10,"textblocks":[{"first":[251.1241912841797,710.3050537109375,6.1546478271484375,8.5],"last":[288.100830078125,710.3050537109375,3.97955322265625,8.5],"length":10,"rects":[[251.1241912841797,710.3050537109375,40.95619201660156,8.5]],"start":878,"text":"CsrfFilter"}],"type":5},{"content":"退出登录过滤器","date":"2022-03-25 14:16:50","docid":0,"fillcolor":"ffffed99","id":22,"originaltext":"LogoutFilter","page":10,"textblocks":[{"first":[332.720703125,770.3438110351562,5.062225341796875,8.5],"last":[383.2258605957031,770.3438110351562,3.97955322265625,8.5],"length":12,"rects":[[332.720703125,770.3438110351562,54.484710693359375,8.5]],"start":1034,"text":"LogoutFilter"}],"type":5},{"content":"认证操作也就是登录要用到的过滤器","date":"2022-03-25 14:17:01","docid":0,"fillcolor":"ffffed99","id":23,"originaltext":"UsernamePasswordAuthenticationFilter","page":11,"textblocks":[{"first":[300.90234375,82.15869140625,7.100860595703125,8.5],"last":[477.6219787597656,82.15869140625,3.9796142578125,8.5],"length":36,"rects":[[300.90234375,82.15869140625,180.69924926757812,8.5]],"start":83,"text":"UsernamePasswordAuthenticationFilter"}],"type":5},{"content":"默认登录界面生成过滤器","date":"2022-03-25 14:17:06","docid":0,"fillcolor":"ffffed99","id":24,"originaltext":"DefaultLoginPageGeneratingFilter","page":11,"textblocks":[{"first":[312.15386962890625,127.94903564453125,7.110595703125,8.5],"last":[461.5914001464844,127.94903564453125,3.979583740234375,8.5],"length":32,"rects":[[312.15386962890625,127.94903564453125,153.4171142578125,8.5]],"start":212,"text":"DefaultLoginPageGeneratingFilter"}],"type":5},{"content":"默认登录界面生成过滤器","date":"2022-03-25 14:17:12","docid":0,"fillcolor":"ffffed99","id":25,"originaltext":"DefaultLogoutPageGeneratingFilter","page":11,"textblocks":[{"first":[312.1515197753906,170.41746520996094,7.110565185546875,13.5],"last":[468.455322265625,170.41746520996094,3.97955322265625,13.5],"length":33,"rects":[[312.1515197753906,170.41746520996094,160.28335571289062,13.5]],"start":334,"text":"DefaultLogoutPageGeneratingFilter"}],"type":5},{"content":"会自动解析请求头为Authentication，且以Basic开头的头信息\n用来做头信息验证","date":"2022-03-25 14:17:16","docid":0,"fillcolor":"ffffed99","id":26,"originaltext":"BasicAuthenticationFilter","page":11,"textblocks":[{"first":[326.0584716796875,216.12889099121094,6.32049560546875,13.5],"last":[435.2721862792969,216.12889099121094,3.97955322265625,13.5],"length":25,"rects":[[326.0584716796875,216.12889099121094,113.19326782226562,13.5]],"start":444,"text":"BasicAuthenticationFilter"}],"type":5},{"content":"缓存request","date":"2022-03-25 14:17:25","docid":0,"fillcolor":"ffffed99","id":27,"originaltext":"RequestCacheAwareFilter","page":11,"textblocks":[{"first":[296.2322998046875,265.18072509765625,6.02783203125,8.5],"last":[408.2695617675781,265.18072509765625,3.97955322265625,8.5],"length":23,"rects":[[296.2322998046875,265.18072509765625,116.01681518554688,8.5]],"start":571,"text":"RequestCacheAwareFilter"}],"type":5},{"content":"维护上下文","date":"2022-03-25 14:17:33","docid":0,"fillcolor":"ffffed99","id":28,"originaltext":"SecurityContextHolderAwareRequestFilter","page":11,"textblocks":[{"first":[279.2681884765625,310.16363525390625,5.35479736328125,8.5],"last":[466.18133544921875,310.16363525390625,3.979522705078125,8.5],"length":39,"rects":[[279.2681884765625,310.16363525390625,190.89266967773438,8.5]],"start":711,"text":"SecurityContextHolderAwareRequestFilter"}],"type":5},{"content":"游客身份的配置","date":"2022-03-25 14:17:40","docid":0,"fillcolor":"ffffed99","id":29,"originaltext":"AnonymousAuthenticationFilter","page":11,"textblocks":[{"first":[301.0960693359375,355.9075622558594,6.174102783203125,8.5],"last":[441.3641052246094,355.9075622558594,3.979522705078125,8.5],"length":29,"rects":[[301.0960693359375,355.9075622558594,144.24755859375,8.5]],"start":847,"text":"AnonymousAuthenticationFilter"}],"type":5},{"content":"会话管理","date":"2022-03-25 14:17:47","docid":0,"fillcolor":"ffffed99","id":30,"originaltext":"SessionManagementFilter","page":11,"textblocks":[{"first":[268.79888916015625,415.6597900390625,5.354736328125,9.5],"last":[382.5941162109375,415.6597900390625,3.979461669921875,9.5],"length":23,"rects":[[268.79888916015625,415.6597900390625,117.77468872070312,9.5]],"start":1038,"text":"SessionManagementFilter"}],"type":5},{"content":"抛出异常的处理","date":"2022-03-25 14:17:55","docid":0,"fillcolor":"ffffed99","id":31,"originaltext":"ExceptionTranslationFilter","page":11,"textblocks":[{"first":[264.5059814453125,459.126708984375,5.4229736328125,13.5],"last":[378.0538024902344,459.126708984375,3.979461669921875,13.5],"length":26,"rects":[[264.5059814453125,459.126708984375,117.52728271484375,13.5]],"start":1147,"text":"ExceptionTranslationFilter"}],"type":5},{"content":"授权过滤器","date":"2022-03-25 14:18:01","docid":0,"fillcolor":"ffffed99","id":32,"originaltext":"FilterSecurityInterceptor","page":11,"textblocks":[{"first":[307.7938232421875,504.21099853515625,5.032806396484375,13.5],"last":[413.75421142578125,504.21099853515625,3.97943115234375,13.5],"length":25,"rects":[[307.7938232421875,504.21099853515625,109.9398193359375,13.5]],"start":1283,"text":"FilterSecurityInterceptor"}],"type":5}],"originaltext":"1 Spring Security常用过滤器介绍","page":10,"textblocks":[{"first":[66.9686050415039,421.2851867675781,9.74664306640625,22.5499267578125],"last":[311.57958984375,421.2851867675781,17.069244384765625,22.5499267578125],"length":24,"rects":[[66.9686050415039,421.2851867675781,261.6802291870117,22.5499267578125]],"start":127,"text":"1 Spring Security常用过滤器介绍"}],"type":5},{"date":"2022-03-25 15:17:21","docid":0,"fillcolor":"ffffed99","folded":false,"id":34,"markups":[{"content":"这是一个最根本的过滤器，web.xml中配置了所有的请求都要走一遍这个过滤器\n\n其中get一个bean叫FilterChainProxy\n是一个过滤器，用他来调用所有的过滤器","date":"2022-03-25 15:17:33","docid":0,"fillcolor":"ffffed99","folded":false,"id":35,"markups":[{"content":"初始化所有的过滤器链","date":"2022-03-25 15:22:26","docid":0,"fillcolor":"ffffed99","id":36,"originaltext":"delegateToUse = this.initDelegate(wac);","page":12,"textblocks":[{"first":[161.39697265625,490.6215515136719,4.8282012939453125,8.778564453125],"last":[344.7493591308594,490.6215515136719,4.828216552734375,8.778564453125],"length":39,"rects":[[161.39697265625,490.6215515136719,188.18060302734375,8.778564453125]],"start":1333,"text":"delegateToUse = this.initDelegate(wac);"}],"type":5},{"content":"初始化的步骤\n1、获取到名字为springSecurityFilterChain的bean\n也就是FilterChainProxy类\n2、执行里面init方法，返回","date":"2022-03-25 15:23:00","docid":0,"fillcolor":"ffffed99","id":37,"originaltext":"protected Filter initDelegate(WebApplicationContext wac)","page":12,"textblocks":[{"first":[84.17501831054688,639.181640625,4.8282012939453125,8.77850341796875],"last":[349.582763671875,639.181640625,4.828216552734375,8.77850341796875],"length":56,"rects":[[84.17501831054688,639.181640625,270.2359619140625,8.77850341796875]],"start":1614,"text":"protected Filter initDelegate(WebApplicationContext wac)"}],"type":5},{"content":"执行过滤器链","date":"2022-03-25 15:23:13","docid":0,"fillcolor":"ffffed99","id":38,"originaltext":"this.invokeDelegate(delegateToUse, request, response, filterChain);","page":12,"textblocks":[{"first":[103.48331451416016,585.1597900390625,4.8282012939453125,8.77850341796875],"last":[421.96002197265625,585.1597900390625,4.828216552734375,8.77850341796875],"length":67,"rects":[[103.48331451416016,585.1597900390625,323.30492401123047,8.77850341796875]],"start":1508,"text":"this.invokeDelegate(delegateToUse, request, response, filterChain);"}],"type":5},{"content":"由初始化过滤器可以知道，其中又要给根据id名和类型获取组件拦截器的过程，其中的名字是明确规定是：springSecurityFilterChina\n对应的过滤器是FilterChainProxy","date":"2022-03-25 15:25:05","docid":0,"fillcolor":"ffffed99","id":40,"originaltext":"第二步debug结果如下：","page":13,"textblocks":[{"first":[52.357032775878906,182.49661254882812,9.75396728515625,14.5],"last":[149.39175415039062,182.49661254882812,9.75396728515625,14.5],"length":13,"rects":[[52.357032775878906,182.49661254882812,106.78868865966797,14.5]],"start":0,"text":"第二步debug结果如下："}],"type":5}],"originaltext":"1 DelegatingFilterProxy","page":12,"textblocks":[{"first":[77.40625,56.9545783996582,8.354385375976562,18.499996185302734],"last":[239.30320739746094,56.9545783996582,8.325119018554688,18.499996185302734],"length":23,"rects":[[77.40625,56.9545783996582,170.22207641601562,18.499996185302734]],"start":4,"text":"1 DelegatingFilterProxy"}],"type":5},{"content":"这个里面有一个list封装了SecurityFilterChain的filterChains;\n\n其中使用doFilterInternal通过getFilters获取DefaultSecurityFilterChain中所有的过滤器","date":"2022-03-25 15:24:57","docid":0,"fillcolor":"ffffed99","folded":true,"id":39,"markups":[{"content":"会调doFilterInternal方法","date":"2022-03-25 15:52:45","docid":0,"fillcolor":"ffffed99","id":41,"markups":[{"content":"1、从request中获取所有的过滤器到SecurityFilterChain中\n2、加载过滤器链中的过滤器","date":"2022-03-25 15:53:11","docid":0,"fillcolor":"ffffed99","id":42,"originaltext":"doFilterInternal","page":14,"textblocks":[{"first":[146.8838653564453,355.7658386230469,4.8282012939453125,8.778564453125],"last":[219.28062438964844,355.7658386230469,4.8282012939453125,8.778564453125],"length":16,"rects":[[146.8838653564453,355.7658386230469,77.22496032714844,8.778564453125]],"start":826,"text":"doFilterInternal"}],"type":5}],"originaltext":"doFilter","page":14,"textblocks":[{"first":[142.06541442871094,126.1730728149414,4.8282012939453125,8.778541564941406],"last":[175.85081481933594,126.1730728149414,4.8282012939453125,8.778541564941406],"length":8,"rects":[[142.06541442871094,126.1730728149414,38.61360168457031,8.778541564941406]],"start":140,"text":"doFilter"}],"type":5}],"originaltext":"2 FilterChainProxy","page":13,"textblocks":[{"first":[77.4054183959961,480.9297790527344,8.354270935058594,18.5],"last":[202.77316284179688,480.9297790527344,8.32501220703125,18.5],"length":18,"rects":[[77.4054183959961,480.9297790527344,133.69275665283203,18.5]],"start":118,"text":"2 FilterChainProxy"}],"type":5}],"originaltext":"2 spring security过滤器链加载原理","page":11,"textblocks":[{"first":[66.96520233154297,664.3758544921875,9.746170043945312,21.4970703125],"last":[326.8006286621094,664.3758544921875,17.068511962890625,21.4970703125],"length":25,"rects":[[66.96520233154297,664.3758544921875,276.90393829345703,21.4970703125]],"start":1550,"text":"2 spring security过滤器链加载原理"}],"type":5},{"date":"2022-03-25 16:08:09","docid":0,"fillcolor":"ffffed99","id":43,"originaltext":"3 SecurityFilterChain","page":15,"textblocks":[{"first":[77.4054183959961,537.9869995117188,8.354270935058594,18.5],"last":[220.01329040527344,537.9869995117188,9.612533569335938,18.5],"length":21,"rects":[[77.4054183959961,537.9869995117188,152.22040557861328,18.5]],"start":88,"text":"3 SecurityFilterChain"}],"type":5}],"originaltext":"四、Spring Security过滤器链","page":10,"textblocks":[{"first":[52.35723114013672,378.2994384765625,21.946426391601562,27.5],"last":[326.68719482421875,378.2994384765625,21.9464111328125,27.5],"length":21,"rects":[[52.35723114013672,378.2994384765625,296.27637481689453,27.5]],"start":102,"text":"四、Spring Security过滤器链"}],"type":5},{"date":"2022-03-25 16:08:43","docid":0,"fillcolor":"ffffed99","folded":true,"id":45,"markups":[{"date":"2022-03-25 16:08:49","docid":0,"fillcolor":"ffffed99","folded":false,"id":46,"markups":[{"content":"设置认证的页面","date":"2022-03-25 16:13:48","docid":0,"fillcolor":"ffffed99","folded":false,"id":52,"markups":[{"content":"设置登录的页面","date":"2022-03-25 16:10:33","docid":0,"fillcolor":"ffffed99","id":48,"originaltext":"login-page","page":17,"textblocks":[{"first":[204.82127380371094,342.0585632324219,4.828216552734375,8.778564453125],"last":[248.26016235351562,342.0585632324219,4.828216552734375,8.778564453125],"length":10,"rects":[[204.82127380371094,342.0585632324219,48.26710510253906,8.778564453125]],"start":1205,"text":"login-page"}],"type":5},{"content":"设置登录的地址，也就是表单提交地址","date":"2022-03-25 16:10:38","docid":0,"fillcolor":"ffffed99","id":49,"originaltext":"login-processing-url","page":17,"textblocks":[{"first":[204.8452606201172,355.5640563964844,4.828216552734375,8.778564453125],"last":[296.5483093261719,355.5640563964844,4.828216552734375,8.778564453125],"length":20,"rects":[[204.8452606201172,355.5640563964844,96.53126525878906,8.778564453125]],"start":1258,"text":"login-processing-url"}],"type":5},{"content":"默认跳转认证成功跳转，就在登录界面登录后跳转的地方","date":"2022-03-25 16:10:42","docid":0,"fillcolor":"ffffed99","id":50,"originaltext":"default-target-url","page":17,"textblocks":[{"first":[204.8452606201172,369.0695495605469,4.828216552734375,8.778564453125],"last":[286.8956298828125,369.0695495605469,4.828216552734375,8.778564453125],"length":18,"rects":[[204.8452606201172,369.0695495605469,86.87858581542969,8.778564453125]],"start":1317,"text":"default-target-url"}],"type":5},{"content":"认证失败的页面","date":"2022-03-25 16:10:45","docid":0,"fillcolor":"ffffed99","id":51,"originaltext":"authentication-failure-url","page":17,"textblocks":[{"first":[204.8452606201172,382.5750732421875,4.828216552734375,8.778564453125],"last":[325.507080078125,382.5750732421875,4.828216552734375,8.778564453125],"length":26,"rects":[[204.8452606201172,382.5750732421875,125.49003601074219,8.778564453125]],"start":1378,"text":"authentication-failure-url"}],"type":5}],"originaltext":"security:form-login","page":17,"textblocks":[{"first":[108.3020248413086,342.0585632324219,4.828208923339844,8.778564453125],"last":[195.17909240722656,342.0585632324219,4.828216552734375,8.778564453125],"length":19,"rects":[[108.3020248413086,342.0585632324219,91.70528411865234,8.778564453125]],"start":1185,"text":"security:form-login"}],"type":5},{"date":"2022-03-25 16:15:11","docid":0,"fillcolor":"ffffed99","folded":true,"id":53,"markups":[{"content":"登录退出页面，用security设置的","date":"2022-03-25 16:15:19","docid":0,"fillcolor":"ffffed99","id":54,"originaltext":"logout-url","page":17,"textblocks":[{"first":[185.51290893554688,409.5860290527344,4.828216552734375,8.778564453125],"last":[228.95108032226562,409.5860290527344,4.828216552734375,8.778564453125],"length":10,"rects":[[185.51290893554688,409.5860290527344,48.266387939453125,8.778564453125]],"start":1474,"text":"logout-url"}],"type":5},{"content":"成功然后跳转的界面","date":"2022-03-25 16:15:23","docid":0,"fillcolor":"ffffed99","id":55,"originaltext":"logout-success-url","page":17,"textblocks":[{"first":[185.5361785888672,423.0915222167969,4.828216552734375,8.778564453125],"last":[267.5865173339844,423.0915222167969,4.828216552734375,8.778564453125],"length":18,"rects":[[185.5361785888672,423.0915222167969,86.87855529785156,8.778564453125]],"start":1520,"text":"logout-success-url"}],"type":5}],"originaltext":"security:logout","page":17,"textblocks":[{"first":[108.3020248413086,409.5860290527344,4.828208923339844,8.778564453125],"last":[175.87298583984375,409.5860290527344,4.828216552734375,8.778564453125],"length":15,"rects":[[108.3020248413086,409.5860290527344,72.39917755126953,8.778564453125]],"start":1458,"text":"security:logout"}],"type":5},{"content":"让认证页面可以匿名访问，但是后续的请求还是会经过过滤器链\n其中的access中的参数表示依然会走过后续所有的权限认证","date":"2022-03-25 16:17:35","docid":0,"fillcolor":"ffffed99","id":56,"originaltext":"security:intercept-url","page":17,"textblocks":[{"first":[108.3020248413086,288.0365905761719,4.828208923339844,8.778564453125],"last":[209.65847778320312,288.0365905761719,4.828216552734375,8.778564453125],"length":22,"rects":[[108.3020248413086,288.0365905761719,106.1846694946289,8.778564453125]],"start":922,"text":"security:intercept-url"}],"type":5},{"content":"释放所有的静态资源","date":"2022-03-25 16:21:48","docid":0,"fillcolor":"ffffed99","id":57,"originaltext":"security:http","page":17,"textblocks":[{"first":[88.99292755126953,166.48721313476562,4.828208923339844,8.778564453125],"last":[146.91122436523438,166.48721313476562,4.828216552734375,8.778564453125],"length":13,"rects":[[88.99292755126953,166.48721313476562,62.74651336669922,8.778564453125]],"start":468,"text":"security:http"}],"type":5}],"originaltext":"1 在SpringSecurity主配置文件中指定认证页面配置信息","page":16,"textblocks":[{"first":[66.96831512451172,577.3274536132812,9.746627807617188,22.5],"last":[477.8408508300781,577.3274536132812,17.069366455078125,22.5],"length":33,"rects":[[66.96831512451172,577.3274536132812,427.94190216064453,22.5]],"start":167,"text":"1 在SpringSecurity主配置文件中指定认证页面配置信息"}],"type":5},{"date":"2022-03-25 16:08:58","docid":0,"fillcolor":"ffffed99","folded":true,"id":47,"markups":[{"date":"2022-03-25 16:48:13","docid":0,"fillcolor":"ffffed99","id":58,"originaltext":"CSRF（Cross-site request forgery）跨站请求伪造，是一种难以防范的网络攻击方式。","page":19,"textblocks":[{"first":[52.35690689086914,421.13861083984375,6.213260650634766,14.5],"last":[425.1168212890625,421.13861083984375,9.753936767578125,14.5],"length":54,"rects":[[52.35690689086914,421.13861083984375,382.5138511657715,14.5]],"start":123,"text":"CSRF（Cross-site request forgery）跨站请求伪造，是一种难以防范的网络攻击方式。"}],"type":5},{"content":"将请求分成了两类\n对于第一类：\"GET\", \"HEAD\", \"TRACE\", \"OPTIONS\"四类请求可以直接通过\n\n对于第二类：除去上面四类，包括POST都要被验证携带token才能通过\n\n因为对数据库改变的请求都比较危险，只有携带了token的请求才可以通过","date":"2022-03-25 16:48:18","docid":0,"fillcolor":"ffffed99","id":59,"originaltext":"1 SpringSecurity中CsrfFilter过滤器说明","page":19,"textblocks":[{"first":[77.40503692626953,446.40118408203125,8.354248046875,19.5],"last":[336.14556884765625,446.40118408203125,14.63092041015625,19.5],"length":32,"rects":[[77.40503692626953,446.40118408203125,273.37145233154297,19.5]],"start":182,"text":"1 SpringSecurity中CsrfFilter过滤器说明"}],"type":5},{"date":"2022-03-25 17:03:54","docid":0,"fillcolor":"ffffed99","id":60,"originaltext":"2 禁用csrf防护机制","page":21,"textblocks":[{"first":[77.40522003173828,243.15753173828125,8.354270935058594,17.5],"last":[189.8151397705078,243.15753173828125,14.630950927734375,17.5],"length":12,"rects":[[77.40522003173828,243.15753173828125,127.0408706665039,17.5]],"start":116,"text":"2 禁用csrf防护机制"}],"type":5},{"date":"2022-03-25 17:04:10","docid":0,"fillcolor":"ffffed99","id":61,"originaltext":"3 在认证页面携带token请求","page":21,"textblocks":[{"first":[77.40522003173828,557.5352783203125,8.354270935058594,17.5],"last":[249.05323791503906,557.5352783203125,14.630935668945312,17.5],"length":16,"rects":[[77.40522003173828,557.5352783203125,186.2789535522461,17.5]],"start":172,"text":"3 在认证页面携带token请求"}],"type":5}],"originaltext":"2 SpringSecurity的csrf防护机制","page":19,"textblocks":[{"first":[66.96847534179688,384.02880859375,9.746650695800781,22.435150146484375],"last":[304.6306457519531,384.02880859375,17.06939697265625,22.435150146484375],"length":25,"rects":[[66.96847534179688,384.02880859375,254.7315673828125,22.435150146484375]],"start":96,"text":"2 SpringSecurity的csrf防护机制"}],"type":5}],"originaltext":"五、SpringSecurity使用自定义认证页面","page":16,"textblocks":[{"first":[52.357032775878906,534.326416015625,21.94641876220703,27.5],"last":[430.7174987792969,534.326416015625,21.946380615234375,27.5],"length":25,"rects":[[52.357032775878906,534.326416015625,400.30684661865234,27.5]],"start":138,"text":"五、SpringSecurity使用自定义认证页面"}],"type":5},{"content":"问题：使用认证接口用的是SpringSecurity的login接口，不会自动去取得数据库中的数据去认证，怎么去让他取得数据库中用户表的信息来认证？\n1、需要分析认证流程","date":"2022-03-25 17:08:02","docid":0,"fillcolor":"ffffed99","folded":false,"id":62,"markups":[{"date":"2022-03-25 17:08:23","docid":0,"fillcolor":"ffffed99","folded":false,"id":63,"markups":[{"content":"这里面规定了\n用户名必须使用username\n密码必须是password\n登录请求必须是/login 的post\n\n接下来会对username和password进行处理\n防止为null\n并且限制username有空格\n\n封装到\nUsernamePasswordAuthenticationToken中\n\n最后认证","date":"2022-03-27 11:39:49","docid":0,"fillcolor":"ffffed99","id":64,"originaltext":"UsernamePasswordAuthenticationFilter","page":22,"textblocks":[{"first":[52.356781005859375,463.7213439941406,11.060943603515625,11.5],"last":[339.73760986328125,463.7213439941406,6.642425537109375,11.5],"length":36,"rects":[[52.356781005859375,463.7213439941406,294.02325439453125,11.5]],"start":98,"text":"UsernamePasswordAuthenticationFilter"}],"type":5},{"content":"List<AuthenticationProvider>\n集合了所有的认证方式","date":"2022-03-27 11:39:54","docid":0,"fillcolor":"ffffed99","folded":true,"id":65,"markups":[{"content":"遍历所有的认证方式\n将认证方式都变成一个一个的\nAuthenticationProvider对象\n（注意可以集成第三方登录）","date":"2022-03-28 14:05:10","docid":0,"fillcolor":"ffffed99","id":67,"originaltext":"Iterator var8 = this.getProviders().iterator();","page":23,"textblocks":[{"first":[103.48356628417969,747.0897216796875,4.828216552734375,8.778564453125],"last":[325.426025390625,747.0897216796875,4.828216552734375,8.778564453125],"length":47,"rects":[[103.48356628417969,747.0897216796875,226.7706756591797,8.778564453125]],"start":1933,"text":"Iterator var8 = this.getProviders().iterator();"}],"type":5},{"date":"2022-03-28 14:07:20","docid":0,"fillcolor":"ffffed99","id":68,"originaltext":"result = provider.authenticate(authentication);","page":24,"textblocks":[{"first":[161.39697265625,180.22573852539062,4.8282012939453125,8.778549194335938],"last":[383.35467529296875,180.22573852539062,4.828216552734375,8.778549194335938],"length":47,"rects":[[161.39697265625,180.22573852539062,226.78591918945312,8.778549194335938]],"start":417,"text":"result = provider.authenticate(authentication);"}],"type":5}],"originaltext":"AuthenticationManager","page":23,"textblocks":[{"first":[52.357032775878906,349.94879150390625,10.095352172851562,11.5],"last":[220.934814453125,349.94879150390625,6.6424560546875,11.5],"length":21,"rects":[[52.357032775878906,349.94879150390625,175.2202377319336,11.5]],"start":0,"text":"AuthenticationManager"}],"type":5},{"date":"2022-03-27 11:40:01","docid":0,"fillcolor":"ffffed99","id":66,"originaltext":"AbstractUserDetailsAuthenticationProvider","page":25,"textblocks":[{"first":[52.357032775878906,214.95440673828125,10.095352172851562,11.5],"last":[364.48468017578125,214.95440673828125,6.6424560546875,11.5],"length":41,"rects":[[52.357032775878906,214.95440673828125,318.77010345458984,11.5]],"start":0,"text":"AbstractUserDetailsAuthenticationProvider"}],"type":5},{"date":"2022-03-28 14:23:49","docid":0,"fillcolor":"ffffed99","id":69,"originaltext":"authenticate返回值","page":26,"textblocks":[{"first":[385.7543029785156,89.98992919921875,8.83709716796875,17.5],"last":[509.86749267578125,89.98992919921875,14.63092041015625,17.5],"length":15,"rects":[[385.7543029785156,89.98992919921875,138.74411010742188,17.5]],"start":42,"text":"authenticate返回值"}],"type":5}],"originaltext":"1 认证流程分析","page":22,"textblocks":[{"first":[66.96831512451172,423.2074890136719,9.746627807617188,20.5],"last":[166.49188232421875,423.2074890136719,17.069366455078125,20.5],"length":8,"rects":[[66.96831512451172,423.2074890136719,116.59293365478516,20.5]],"start":88,"text":"1 认证流程分析"}],"type":5},{"date":"2022-03-28 16:24:01","docid":0,"fillcolor":"ffffed99","folded":false,"id":70,"markups":[{"content":"里面要实现返回封装认证信息的方法","date":"2022-03-28 16:24:06","docid":0,"fillcolor":"ffffed99","id":71,"originaltext":"1 让我们自己的UserService接口继承UserDetailsService","page":29,"textblocks":[{"first":[77.40503692626953,622.1075439453125,8.354248046875,17.5],"last":[449.9238586425781,622.1075439453125,8.646881103515625,17.5],"length":41,"rects":[[77.40503692626953,622.1075439453125,381.1657028198242,17.5]],"start":246,"text":"1 让我们自己的UserService接口继承UserDetailsService"}],"type":5},{"content":"封装认证信息\n1、角色封装到SimpleGrantedAuthority中，统一放到list集合中\n2、将username、password和角色集合放到UserDetails对象中\n3、返回出去","date":"2022-03-28 16:24:39","docid":0,"fillcolor":"ffffed99","id":72,"originaltext":"2 编写loadUserByUsername业务","page":30,"textblocks":[{"first":[77.40522003173828,219.81582641601562,8.354270935058594,19.5],"last":[291.9249267578125,219.81582641601562,14.630950927734375,19.5],"length":24,"rects":[[77.40522003173828,219.81582641601562,229.1506576538086,19.5]],"start":6,"text":"2 编写loadUserByUsername业务"}],"type":5},{"content":"配置security中认证信息的来源","date":"2022-03-28 16:26:05","docid":0,"fillcolor":"ffffed99","id":73,"originaltext":"3 在SpringSecurity主配置文件中指定认证使用的业务对象","page":30,"textblocks":[{"first":[77.40522003173828,483.1736145019531,8.354270935058594,19.5],"last":[444.2135009765625,483.1736145019531,14.630950927734375,19.5],"length":34,"rects":[[77.40522003173828,483.1736145019531,381.4392318725586,19.5]],"start":38,"text":"3 在SpringSecurity主配置文件中指定认证使用的业务对象"}],"type":5}],"originaltext":"2 初步实现认证功能","page":29,"textblocks":[{"first":[66.96847534179688,585.0935668945312,9.746650695800781,19.5],"last":[200.63107299804688,585.0935668945312,17.06939697265625,19.5],"length":10,"rects":[[66.96847534179688,585.0935668945312,150.73199462890625,19.5]],"start":230,"text":"2 初步实现认证功能"}],"type":5},{"content":"对于密码需要进行加密\n而加密类就是BCryptPasswordEncoder","date":"2022-03-28 16:26:30","docid":0,"fillcolor":"ffffed99","id":74,"markups":[{"content":"进入security中配置加密类","date":"2022-03-28 16:26:38","docid":0,"fillcolor":"ffffed99","id":75,"originaltext":"1 在IOC容器中提供加密对象","page":30,"textblocks":[{"first":[77.40503692626953,647.7611694335938,8.354248046875,17.5],"last":[247.0455322265625,647.7611694335938,14.63092041015625,17.5],"length":15,"rects":[[77.40503692626953,647.7611694335938,184.27141571044922,17.5]],"start":90,"text":"1 在IOC容器中提供加密对象"}],"type":5},{"content":"认证的时候底层自动会调用配置的加密类进行认证，只不过密码设置阶段需要自己进行使用加密类进行加密","date":"2022-03-28 17:21:59","docid":0,"fillcolor":"ffffed99","id":76,"originaltext":"2 修改认证方法","page":31,"textblocks":[{"first":[77.40522003173828,220.89404296875,8.354270935058594,17.5],"last":[162.7111358642578,220.89404296875,14.630950927734375,17.5],"length":8,"rects":[[77.40522003173828,220.89404296875,99.9368667602539,17.5]],"start":6,"text":"2 修改认证方法"}],"type":5},{"content":"密码加密，存储数据库","date":"2022-03-28 17:22:06","docid":0,"fillcolor":"ffffed99","id":77,"originaltext":"3 修改添加用户的操作","page":31,"textblocks":[{"first":[77.40522003173828,509.01116943359375,8.354270935058594,17.5],"last":[206.60397338867188,509.01116943359375,14.630950927734375,17.5],"length":11,"rects":[[77.40522003173828,509.01116943359375,143.82970428466797,17.5]],"start":31,"text":"3 修改添加用户的操作"}],"type":5},{"date":"2022-03-28 17:25:37","docid":0,"fillcolor":"ffffed99","id":78,"originaltext":"4 手动将数据库中用户密码改为加密后的密文","page":32,"textblocks":[{"first":[77.40522003173828,102.868896484375,8.354270935058594,17.5],"last":[352.91339111328125,102.868896484375,14.630950927734375,17.5],"length":21,"rects":[[77.40522003173828,102.868896484375,290.13912200927734,17.5]],"start":4,"text":"4 手动将数据库中用户密码改为加密后的密文"}],"type":5}],"originaltext":"3 加密认证","page":30,"textblocks":[{"first":[66.96847534179688,609.4961547851562,9.746650695800781,20.5],"last":[132.35348510742188,609.4961547851562,17.06939697265625,20.5],"length":6,"rects":[[66.96847534179688,609.4961547851562,82.45440673828125,20.5]],"start":78,"text":"3 加密认证"}],"type":5}],"originaltext":"六、SpringSecurity使用数据库数据完成认证","page":22,"textblocks":[{"first":[52.357032775878906,378.4903564453125,21.94641876220703,27.715728759765625],"last":[474.6101989746094,378.4903564453125,21.946380615234375,27.715728759765625],"length":27,"rects":[[52.357032775878906,378.4903564453125,444.19954681396484,27.715728759765625]],"start":57,"text":"六、SpringSecurity使用数据库数据完成认证"}],"type":5}],"maxid":78,"notelinks":[],"title":"SpringSecurity_day01","unimportant":[]}